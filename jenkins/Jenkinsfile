pipeline {
    agent any

    stages {
        stage('Prepare') {
            steps {
                script {
                    echo 'Preparing test results...'
                    // Create a minimal JUnit XML file
                    writeFile file: 'test-results.xml', text: '''<?xml version="1.0" encoding="UTF-8"?>
                    <testsuites name="MyTestSuitesName">
                        <testsuite name="example_suite" tests="1" failures="0">
                            <testcase name="example_test"/>
                        </testsuite>
                    </testsuites>'''
                }
            }
        }

        stage('Archive and Publish') {
            steps {
                script {
                    // Archive the test results
                    archiveArtifacts artifacts: 'test-results.xml', allowEmptyArchive: true
                    
                    // Publish the test results
                    junit 'test-results.xml'
                }
            }
        }
    }
}
